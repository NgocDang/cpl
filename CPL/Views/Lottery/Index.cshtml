@{
    Layout = "_Layout";
    ViewData["Title"] = @LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "Lottery");
}
@model LotteryGameViewModel

@section styles
    {
    <link rel="stylesheet" href="~/js/dashboard/plugins/datatables/datatables.min.css">
    <link rel="stylesheet" href="~/js/dashboard/plugins/datatables/DataTables-1.10.16/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="~/js/dashboard/plugins/datatables/Responsive-2.2.1/css/responsive.bootstrap4.min.css" />
    <link href="~/css/dashboard/cpl.lottery.css" rel="stylesheet" asp-append-version="true" />
}
<div class="app-content container center-layout mt-2">
    <div class="content-wrapper">
        <div class="content-body">
            @Html.HiddenFor(x => x.SysUserId)
            <div class="row mb-3">
                <div class="col-12">
                    <div class="card p-1">
                        <img src="~/images/lottery/slide_lottery.jpg" class="img-fluid" alt="Lottery banner">
                    </div>
                </div>
            </div>
            @if (Model.Lotteries != null && Model.Lotteries.Count > 0)
            {
                @await Component.InvokeAsync("TokenBalance")
                <div class="row mb-1">
                    <div class="col-lg-6 col-12">
                        <div class="card">
                            <img class="img-fluid" src="~/images/lottery/NEW-HP-01_78.png" />
                        </div>
                    </div>
                    <div class="col-lg-6 col-12" id="div-buy-lottery">
                        <div class="card">
                            <div class="card-content">
                                <div class="card-content">
                                    <div class="card-body">
                                        <div class="col-12">
                                            <div class="row font-weight-bold">
                                                <div class="col-6">
                                                    @LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "PurchasedTickets")
                                                </div>
                                                <div class="col-6 text-right">
                                                    <h1>@Model.Lotteries[0].LotteryHistories.Count() / @Model.Lotteries[0].Volume <span class="card-description text-muted"></span></h1>
                                                </div>
                                            </div>
                                            <div class="row mt-8px">
                                                <div class="progress progress-custom">
                                                    <div class="progress-bar bg-cpl" id="process-lottery" style="width:@Model.PrecentOfPerchasedTickets%"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card" id="buy-lottery-bg">
                            <div class="card-content">
                                <div class="card-content">
                                    <div class="card-body p-5">
                                        <form id="form-purchase-lottery">
                                            <div class="form-group row text-white">
                                                <div class="col-12 text-center font-large-2 font-weight-bold mb-5">
                                                    @LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "BuyLottery")
                                                </div>
                                                <div class="col-12 mb">
                                                    <fieldset class="form-label-group my-1">
                                                        <input type="number" name="number-of-ticket" class="form-control" id="number-of-ticket" value="0" min="1" max="5000" required aria-describedby="basic-addon4">
                                                        <label for="number-of-ticket">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "SelectNumberTicket")</label>
                                                    </fieldset>
                                                </div>
                                                <div class="col-12 mb">
                                                    <button type="button" class="btn btn-primary btn-block my-1 w-100" id="btn-purchase-lottery"><i class="fas fa-money-bill-alt"></i> @LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "Purchase")</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-12 none" id="div-confirm-lottery">
                        <form id="form-purchase-lottery-ticket" method="POST" action="#" class="needs-validation" novalidate="">

                            <div class="card pl-2 pr-2 pt-2 pb-5">
                                <div class="card-header text-center font-large-1 font-weight-bold text-danger">
                                    CONFIRMATION
                                </div>
                                <div class="card-content mt-5">
                                    <div class="card-content font-weight-bold font-medium-4">
                                        <div class="card-body mt-1">
                                            <div class="row mb-1">
                                                <div class="col-6 text-left">Ticket price:</div>
                                                <div class="col-6 text-right" id="ticket-price">500 CPL</div>
                                            </div>
                                            <div class="row mb-2">
                                                <div class="col-6 text-left">Total of tickets:</div>
                                                <div class="col-6 text-right" id="total-of-tiket">1</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer font-weight-bold font-medium-4">
                                    <div class="row mt-1 text-danger">
                                        <div class="col-6 text-left">Total price:</div>
                                        <div class="col-6 text-right" id="total-price">500 CPL</div>
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <button type="button" id="btn-cancel-purchase-lottery-ticket" class="btn btn-primary btn-block font-large-1">Back</button>
                                </div>
                                <div class="col-6">
                                    <button type="button" id="btn-confirm-purchase-lottery-ticket" class="btn btn-primary btn-block font-large-1">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "Confirm")</button>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            }
        </div>
        <div class="row">
            @if (Model.SysUserId.HasValue)
            {
                <div id="recent-transactions" class="col-12">
                    <h6 class="my-2">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "LotteryHistory")</h6>
                    <div class="card">
                        <div class="card-content">
                            <table id="dt-lottery-history" class="table responsive table-hover table-xl mb-0">
                                <thead>
                                    <tr>
                                        <th class="border-top-0">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "CreatedDate")</th>
                                        <th class="border-top-0">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "Phase")</th>
                                        <th class="border-top-0">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "LotteryTicketNumber")</th>
                                        <th class="border-top-0">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "Status")</th>
                                        <th class="border-top-0">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "Award")</th>
                                        <th class="border-top-0">@LangDetailHelper.Get(Context.Session.GetInt32("LangId").Value, "UpdatedDate")</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
@section scripts
    {
    <script src="~/js/dashboard/cpl.lottery.js"></script>
    <script src="~/js/dashboard/plugins/datatables/datatables.min.js"></script>
    <script src="~/js/dashboard/plugins/datatables/DataTables-1.10.16/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/js/dashboard/plugins/datatables/Responsive-2.2.1/js/dataTables.responsive.min.js"></script>
    <script src="~/js/dashboard/cpl.dtlang.js"></script>
}
